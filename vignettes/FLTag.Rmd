---
title: "Tagging package"
author: "Dougie Kell, Laurie Beare"
date: "`r format(Sys.time(), '%d %B, %Y')`"
output: rmarkdown:::html_document
vignette: >
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEncoding{UTF-8}
bibliography: refs.bib
tags: FLPKG FLR
license: Creative Commons Attribution-ShareAlike 4.0 International
---

```{r knitr_init, echo=FALSE, results="hide"}
library(knitr)
## Global options
opts_chunk$set(echo    =!TRUE,
               eval    =TRUE,
               prompt  =FALSE,
               comment =NA,
               message =FALSE,
               tidy    =FALSE,
               warnings=FALSE,
               fig.height=4.5,
               fig.width =4.5)
```


```{r, pkgs, echo=FALSE, message=FALSE}
warn=options()$warn
options(warn=-1)
library(ggplot2)
library(kobe)

theme_set(theme_bw())
options(digits=3)
options(warn=warn)
```

[](#top)

[Introduction](#Introduction)

[Installation](#Installation)

[Quick Start](#QuickStart)


[More information](#More information)

[References](#References)

# Introduction {#Introduction}


[Back to Top](#top)

# Installation {#Installation}

The simplest way to obtain `FLTage` is to install it from CRAN by using the following command in the R console:

```{r install,echo=TRUE,eval=FALSE}
install.packages("FLTage", repos = "http://cloud.r-project.org/")
```

The repos options can be changed depending on personal preferences and includes options such as choosing the directories in which to install the packages see help(install.packages) for more details.

[Back to Top](#top)

# Quick Start {#QuickStart}


`FLTag` is part of the `FLR` family of packages, you can install the latest version of the FLR packages using the FLR installation script


```{r src,echo=TRUE,eval=FALSE}
source("http://flr-project.org/R/instFLR.R")
```

or, if you know you have all the necessary dependencies, directly from the repository

```{r inst,echo=TRUE,eval=FALSE}
install.packages(repos="http://flr-project.org/R")
```

To get help please post your questions or suggestions to the FLR mailing list. Conversations can be started at our scrollbak.io room. Bug reports for individual packages can be submitted using their individual github issues page.


So that users may have a better idea of what functions are available, which one to choose, or where to seek help, this section provides a general overview of the package. In particular it highlights the various elements, what they do, and provides some examples of usage. More details are given in later sections.

First, load the package:

```{r lib,echo=TRUE}
library(FLTag)
```

There are example datasets for tag releases and recoveries, which are for used for illustration and as test datasets, alternatively users can load their own data.

```{r data,echo=TRUE}
data(releases)

data(recoveries)
```

The datasets contains 

```{r data-rel,echo=TRUE,eval=FALSE}
head(releases)
```

### Plotting

Plotting is done using `ggplot2` which provides a powerful alternative paradigm for creating both simple and complex plots in R using the ideas the *Grammar of Graphics* ^[Wilkinson, L. 1999. *The Grammar of Graphics*, Springer. [doi 10.1007/978-3-642-21551-3_13](http://dx.doi.org/10.1007/978-3-642-21551-3_13).] The idea of the grammar is to specify the individual building blocks of a plot and then to combine them to create the graphic desired^[<http://tutorials.iq.harvard.edu/R/Rgraphics/Rgraphics.html>].

The `ggplot` functions expects a `data.frame` for its first argument, `data`; then a geometric object `geom` that specifies the actual marks put on to a plot and an aesthetic that is "something you can see" have to be provided. Examples of geometic Objects (geom) include points (geom_point, for scatter plots, dot plots, etc), lines (geom_line, for time series, trend lines, etc) and boxplot (geom_boxplot, for, well, boxplots!). Aesthetic mappings are set with the aes() function and, examples include, position (i.e., on the x and y axes), color ("outside" color), fill ("inside" color), shape (of points), linetype and size. 


```{r kpp,echo=TRUE}
```

### Split-apply-combine 

`kobe` contains a variety of functions to summarise assessment results. These can be used with the plyr package to provide summaries by scenario and year. plyr has methods for running split-apply-combine procedures, e.g. first splitting a dataset into subsets, then running a function for each subset and then recombining the results back into a single object.

```{r plyr,echo=TRUE}
```

An example of estimating the quantiles of the current estimates of stock status by method and scenario
```{r plyr2,echo=TRUE,eval=FALSE}
trks=ddply(yft, .(method,scenario), with, quantile(stock))
```

plyr functions have a simple naming convention. The first two letters of the function tells the input and output data types, respectively. The one above takes a data.frame and returns a data.frame. 

```{r plyr3,echo=TRUE,eval=FALSE}
trks=ddply(yft, .(method,scenario,year), with, quantile(stock))

head(trks)
```

The first argument, yft, is the input data frame and contains all the data from the last year in the assessment. The next argument are the variables to subset by over which the statistics will be computed, and the third processes the data.frame by each subset. `with` creates an environment constructed from data in which to run `quantile`. 

```{r plyr4,echo=TRUE,eval=FALSE}
head(trks)
```

```{r plyr5,echo=TRUE,fig.height=4,fig.width=8,}
```

[Back to Top](#top)


[More information](#More information)

* You can submit bug reports, questions or suggestions on `FLPKG` at the `FLPKG` issue page ^[<https://github.com/flr/FLPKG/issues>], or on the *FLR* mailing list.
* Or send a pull request to <https://github.com/flr/FLPKG/>
* For more information on the FLR Project for Quantitative Fisheries Science in R, visit the FLR webpage ^[<http://flr-project.org>].
* The latest version of `FLPKG` can always be installed using the `devtools` package, by calling
```{r, devtools, echo=TRUE, eval=FALSE}
	library(devtools)
	install_github('flr/FLPKG')
```


## Software Versions

* `r version$version.string`
* FLCore: `r packageVersion('FLCore')`
* FLPKG: `r # packageVersion('FLPKG')`
* **Compiled**: `r date()`
* **Git Hash**: `r system("git log --pretty=format:'%h' -n 1", intern=TRUE)`

## Author information

**Laurence KELL**. laurie@kell.es

# References {#References}


[Back to Top](#top)